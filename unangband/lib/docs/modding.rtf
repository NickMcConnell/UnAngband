{\rtf1\mac\ansicpg10000\cocoartf824\cocoasubrtf440
{\fonttbl\f0\fswiss\fcharset77 ArialMT;\f1\fnil\fcharset77 Monaco;}
{\colortbl;\red255\green255\blue255;}
\paperw11900\paperh16840\margl1440\margr1440\vieww19180\viewh12600\viewkind0
\deftab720
\pard\pardeftab720\ql\qnatural

\f0\fs24 \cf0 === Understanding monster.txt ===\
\
This file describes the monster.txt file in the lib\\edit folder.  The monster.txt file is used to initialise almost all information about the monster races in the game.  The file is parsed into the monster.raw file in lib\\data which is a raw data file which is loaded into memory.  The raw file is created if it does not exist, or if the date on the monster.txt file is later than the raw file.  It is best practise to always delete the raw file if you \
\
The monster.txt file consists of one entry for each monster race, which is laid out as follows:
\f1 \
\
N: serial number : monster name\
G: symbol : color\
I: speed : hit points : vision : armor class : alertness\
W: depth : rarity : group index : experience for kill\
M: innate frequency : spell frequency : spell power : mana\
B: attack method : attack effect : damage\
S: spell type | spell type | etc\
F: flag | flag | etc\
D: Description\
\

\f0 'N' indicates the beginning of an entry. The serial number must increase for each new item. Entry 0 is used for the player.\
\
'G' is for graphics - symbol and color. There are currently 16 colors, as follows:\
\

\f1 D - Dark Gray    w - White          s - Gray          o - Orange\
r - Red          g - Green          b - Blue          u - Brown\
d - Black        W - Light Gray     v - Violet        y - Yellow\
R - Light Red    G - Light Green    B - Light Blue    U - Light Brown\

\f0 \
(note that "black" is the same color as the screen background, and thus the monster will appear to be an empty black space if its color is "d".)\
\
'I' is for information - speed, health, vision in tens of feet, armor class, and alertness. 110 is normal speed. Alertness ranges from 0 (ever vigilant for intruders) to 255 (prefers to ignore intruders).\
\
'W' is for more information - level, rarity, group index and experience for killing.  The group index is index to associate monsters of a particular type together. Monsters with the same group index will often be generated on the same level together.  Group indexes if defined will also be used for escorts and for the summon group summoning spell.  The current group indexes in use are:\
\
1  Apprentices\
10 Mimic\
11 - 19 Elementals\
20 Golem\
21 Ghost\
22 Spirit\
23 Golem\
24 Faerie\
25 Ant\
26 Termite\
\
'B' is for blows - method of attack, effect of attack, and damage from attack. There may be up to four of these lines; effect and damage are optional.\
\
'M' is for magic information - cast innate, cast spell, spell power, and mana.  All breath weapons and a few other spells are 'innate' and use the innate percentage chance to determine how frequently they are cast. In addition, some blow types may be used at range (such as arrow, lash, spit and so on) and also use the cast innate to determine how frequently they may be used.\
\
All other spells use the cast spell percentage chance to determine their frequency. In addition, the spell power determines the damage multiplier for these spells (but not breath weapons, which depend on hit points).\
\
Monster mana determines how many spells may be cast before having to rest to recover mana, or cast a spell to add mana. Each monster spell has a mana cost that is associated with this.\
\
'S' is for spells. These are explained in more detail below. As many S: lines may be used as are needed to specify all the spells, spells\
are separated by the '|' symbol.\
\
'F' is for flags. These are explained in more detail below. As many F: lines may be used as are needed to specify all the flags, flags are separated by the '|' symbol.\
\
'D' is for description. As many D: lines may be used as are needed to describe the monster.\
\
=== Understanding monster.txt flags ===\
\
To understand the additional monster flags, you should grep the code base using the regular expression RF[0-9]_ followed by the monster flag as shown in the monster.txt file.\
\
Brief explanations of a number of flags follow:\
\
UNIQUE monsters are just "special" monster races, with the requirement that only one monster of that race can exist at a time, and when it is killed, it can never again be generated.\
\
ATTR_CLEAR monsters appear the same color as the floor, terrain feature or object underneath them.\
\
ATTR_MULTI monsters are "multi-hued" - they change color, every player turn.\
\
ATTR_METAL monsters have a occasionally "flickering" attr which is one step lighter than their base color.\
\
CHAR_CLEAR monsters are totally invisible: the symbol shown on the screen is the same as the floor (or other terrain feature) below it, or the item that is lying on that floor. These monsters can currently be targetted as normal monsters: perhaps this can be changed so that the player must KNOW the monster is there (by bumping into it, or having the monster wake up and attack the player?)\
\
CHAR_MULTI monsters are those which look like objects, and use the symbols of objects. They are in plain sight, but the character should not know that a monster is there. At the moment, such monsters can be targetted normally (which means that this flag currently has no effect), but this may change in the future, as with CHAR_CLEAR monsters.\
\
(Note that currently both CHAR_CLEAR and CHAR_MULTI monsters are treated as normal monsters that are just a little hard to see... if you "l"ook for them, you will find them unless they are invisible and you cannot see invisible, and if you use the * command for targetting mode you can pick them as a target.)\
}